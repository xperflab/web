<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>afdemo</title>
  <meta name="description" content="afdemo">
  <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
  <link rel="stylesheet" type="text/css"
    href="https://cdn.jsdelivr.net/npm/d3-flame-graph@4.1.3/dist/d3-flamegraph.css">
  <style>
    a-scene {
      height: 100%;
      width: 100%;
    }
  </style>
</head>

<body>
  <!-- Use this -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- D3 flamegraph -->
  <script type="text/javascript" src="https://d3js.org/d3.v7.js"></script>
  <script type="text/javascript"
    src="https://cdn.jsdelivr.net/npm/d3-flame-graph@4.1.3/dist/d3-flamegraph.min.js"></script>


  <div class="container-xl m-0 w-full h-screen">
    <div class="flex flex-col h-full">
      <div class="flex flex-row">
        <span>
          <input class="form-controlblock
        w-full
        px-2
        py-1
        text-sm
        font-normal
        text-gray-700
        bg-white bg-clip-padding
        border border-solid border-gray-300
        rounded
        transition
        ease-in-out
        m-0
        focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none" type="file"
            style="width: 220px; display: inline;" id="fileinput"></input>

          <button
            class="inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
            onclick="useTraceGcc()">Use trace_gcc.json</button>
          <button
            class="inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
            onclick="useTrace()">Use trace.json</button>

          <span>
            <input type="checkbox" id="show" name="show" disabled>
            <label for="show">Show Selected</label>
          </span>

          <span>
            <input type="range" id="fginput" name="fginput" min="0" max="0" disabled>
            <label for="fginput">Flamegraph: </label>
          </span>
          <span id="numfg" class="font-bold">0</span>
          <div>
            <span>Start: </span><span id="startTime" class="font-bold"></span>
            <span>End: </span><span id="endTime" class="font-bold"></span>
            <span>Epoch: </span><span id="timeSlice" class="font-bold"></span>
            <span>Max stack depth: </span><span id="maxStackDepth" class="font-bold"></span>
          </div>
        </span>
      </div>

      <div class="flex flex-row pt-2">
        <span class="relative z-0 inline-flex shadow-sm rounded-md">
          <button type="button"
            class="relative inline-flex items-center px-4 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500"
            onclick="increasefg()">+</button>
          <button type="button"
            class="-ml-px relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500"
            onclick="decreasefg()">-</button>
          <!-- <button type="button"
            class="-ml-px relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500"
            onclick="nextFlameGraph()">Next flamegraph</button>
          <button type="button"
            class="-ml-px relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500"
            onclick="prevFlameGraph()">Prev flamegraph</button> -->
          <button type="button"
            class="-ml-px relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500"
            onclick="originalView()">Original view</button>
          <button type="button"
            class="-ml-px relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500"
            onclick="verticalView()">Vertical view</button>
          <button type="button"
            class="-ml-px relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500"
            onclick="zoomIn()">Zoom In</button>
          <button type="button"
            class="-ml-px relative inline-flex items-center px-4 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500"
            onclick="zoomOut()">Zoom Out</button>
        </span>
      </div>

      <div class="flex flex-row pt-2">
        <canvas id="my-canvas" style="display: inline; width: 100%; height: 100%;" crossorigin="anonymous"></canvas>
      </div>

      <div class="flex flex-row pt-2 grow">
        <div class="basis-2/3 pr-2">
          <a-scene embedded ortho>
            <!-- Sky -->
            <a-sky color="white"></a-sky>

            <a-mixin id="moveToZ-3" animation="property: position; to: 0 0 -3"></a-mixin>
            <a-mixin id="moveToZ10" animation="property: position; to: 0 0 10"></a-mixin>
            <a-mixin id="moveBack" animation="property: position; to: 0 0 0"></a-mixin>

            <!-- Ground -->
            <a-plane color="grey" material="opacity: 0.5" rotation="-90 0 0" width="30" height="30"></a-plane>

            <!-- Camera -->
            <a-entity camera="active: true" position="0 4 0.75" rotation="-40 0 0"></a-entity>

            <!-- Root of elements -->
            <a-entity id="root" rotation="20 -45 -20" scale="0.3 0.3 0.3" position="2 -0.3 -4"
              animation="property: rotation; to: 0 -90 -90; startEvents: vertical"
              animation__2="property: rotation; to: 20 -45 -20; startEvents: original"
              animation__3="property: position; to: 2.2 0.5 -4; startEvents: show"
              animation__4="property: position; to: 2 -0.3 -4; startEvents: back">
            </a-entity>

            <!--Tracked controls. -->
            <a-entity laser-controls="hand: left" raycaster="objects: .raycastable; far: 5"></a-entity>
            <a-entity laser-controls="hand: right" raycaster="objects: .raycastable; far: 5"></a-entity>

          </a-scene>
        </div>

        <div class="basis-1/3">
          <span class="align-middle" id="chart"></span>
        </div>

      </div>
    </div>
  </div>


  <!-- Script -->
  <script src="vr.js"></script>
</body>

</html>